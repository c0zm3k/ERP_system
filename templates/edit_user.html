{% extends "base.html" %}

{% block title %}Edit User - Lumen ERP{% endblock %}

{% block content %}
<div style="max-width: 900px; margin: 0 auto;">
    <div style="margin-bottom: 50px;">
        <h1 class="hero-text" style="font-size: 2.5rem; margin-bottom: 10px;">Edit User Account</h1>
        <p style="color: var(--text-secondary); font-weight: 700;">Change username, password, and profile details</p>
    </div>

    <div class="nm-card" style="padding: 50px;">
        <form method="POST">
            <div class="grid-2" style="gap: 30px; margin-bottom: 30px;">
                <div>
                    <label
                        style="display: block; margin-bottom: 12px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Username</label>
                    <input type="text" name="username" class="nm-input" value="{{ user.username }}" required>
                </div>
                <div>
                    <label
                        style="display: block; margin-bottom: 12px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">New
                        Password (Optional)</label>
                    <input type="password" name="password" class="nm-input" placeholder="Leave blank to keep current">
                </div>
            </div>

            {% if user.role == 'Student' %}
            <div class="grid-3" style="margin-bottom: 40px; gap: 20px;">
                <div>
                    <label
                        style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Enrollment
                        Number</label>
                    <input type="text" name="enrollment_no" class="nm-input"
                        value="{{ user.student_profile.enrollment_no }}">
                </div>
                <div>
                    <label
                        style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Department</label>
                    <input type="text" name="department" class="nm-input" value="{{ user.student_profile.department }}">
                </div>
                <div>
                    <label
                        style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Semester</label>
                    <input type="number" name="semester" class="nm-input" value="{{ user.student_profile.semester }}">
                </div>
            </div>
            <div style="margin-bottom: 40px;">
                <label
                    style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Course</label>
                <input type="text" name="course" class="nm-input" value="{{ user.student_profile.course }}">
            </div>
            {% elif user.role == 'Faculty' %}
            <div class="grid-2" style="margin-bottom: 40px; gap: 30px;">
                <div>
                    <label
                        style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Department</label>
                    <input type="text" name="department" class="nm-input" value="{{ user.faculty_profile.department }}">
                </div>
                <div>
                    <label
                        style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Designation</label>
                    <input type="text" name="designation" class="nm-input"
                        value="{{ user.faculty_profile.designation }}">
                </div>
            </div>
            {% endif %}

            <div style="display: flex; gap: 20px;">
                <button type="submit" class="nm-btn"
                    style="flex: 2; padding: 20px; background: var(--accent-color); color: white;">Save Changes</button>
                <a href="/admin/users" class="nm-btn"
                    style="flex: 1; padding: 20px; background: var(--text-primary); color: white;">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}