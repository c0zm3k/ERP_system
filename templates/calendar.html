{% extends "base.html" %}

{% block title %}Calendar - Lumen ERP{% endblock %}

{% block content %}
<div style="margin-bottom: 50px;">
    <h1 class="hero-text" style="margin-bottom: 10px;">Event Calendar</h1>
    <p style="color: var(--text-secondary); font-weight: 700;">Keep track of upcoming holidays, exams, and events</p>
</div>

{% if current_user.role == 'Admin' %}
<div class="nm-card" style="margin-bottom: 60px; padding: 40px;">
    <h2
        style="font-weight: 900; margin-bottom: 25px; letter-spacing: -1px; display: flex; align-items: center; gap: 15px; font-size: 1.2rem;">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent-color)" stroke-width="3">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        Add New Event
    </h2>
    <form action="/admin/events/add" method="POST">
        <div class="grid-2" style="gap: 20px; align-items: flex-end; margin-bottom: 20px;">
            <div>
                <label
                    style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Event
                    Name</label>
                <input type="text" name="title" class="nm-input" placeholder="e.g. Annual Convocation 2026" required>
            </div>
            <div>
                <label
                    style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Date</label>
                <input type="date" name="event_date" class="nm-input" required>
            </div>
        </div>
        <div style="margin-bottom: 30px;">
            <label
                style="display: block; margin-bottom: 10px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary);">Description</label>
            <textarea name="description" class="nm-input" style="height: 100px; resize: none; padding-top: 20px;"
                placeholder="Add some details about the event..."></textarea>
        </div>
        <button type="submit" class="nm-btn"
            style="padding: 18px 50px; background: var(--text-primary); color: white;">Add Event</button>
    </form>
</div>
{% endif %}

<div class="grid-3" style="margin-bottom: 50px;">
    {% for event in events %}
    <div class="nm-card" style="display: flex; flex-direction: column; gap: 20px;">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div class="nm-badge"
                style="background: rgba(109, 93, 252, 0.1); color: var(--accent-color); font-weight: 900; font-size: 0.8rem;">
                {{ event.event_date.strftime('%b %d, %Y') }}
            </div>
            <div style="color: var(--text-secondary); opacity: 0.5;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </div>
        </div>
        <div>
            <h3 style="font-weight: 900; font-size: 1.2rem; margin-bottom: 8px; letter-spacing: -0.5px;">{{ event.title
                }}</h3>
            <p style="color: var(--text-secondary); font-size: 0.9rem; font-weight: 600; line-height: 1.5;">{{
                event.description or 'No details provided.' }}</p>
        </div>
        <div style="margin-top: auto; padding-top: 15px; border-top: 1px solid rgba(0,0,0,0.05);">
            <span
                style="font-size: 0.7rem; font-weight: 800; text-transform: uppercase; color: var(--accent-color); opacity: 0.8;">Event
                Confirmed</span>
        </div>
    </div>
    {% else %}
    <div class="nm-inset" style="grid-column: 1 / -1; padding: 100px; text-align: center; opacity: 0.5;">
        <h3 style="font-weight: 900;">No events found.</h3>
        <p style="font-weight: 700;">There are no upcoming events in the calendar.</p>
    </div>
    {% endfor %}
</div>
{% endblock %}