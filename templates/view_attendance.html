{% extends "base.html" %}

{% block title %}My Attendance - Lumen ERP{% endblock %}

{% block content %}
<div style="margin-bottom: 50px;">
    <h1 class="hero-text" style="margin-bottom: 10px;">My Attendance</h1>
    <p style="color: var(--text-secondary); font-weight: 700;">View your attendance history and statistics</p>
</div>

<div class="grid-3" style="margin-bottom: 50px;">
    <div class="nm-card" style="text-align: center; border-bottom: 5px solid #2ecc71;">
        <h4
            style="color: var(--text-secondary); font-weight: 800; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px;">
            Days Present</h4>
        <div style="font-size: 3rem; font-weight: 900; color: #2ecc71;">{{ present }}</div>
        <p style="font-size: 0.8rem; font-weight: 700; opacity: 0.6;">Total Present</p>
    </div>
    <div class="nm-card" style="text-align: center; border-bottom: 5px solid #ff4757;">
        <h4
            style="color: var(--text-secondary); font-weight: 800; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px;">
            Days Absent</h4>
        <div style="font-size: 3rem; font-weight: 900; color: #ff4757;">{{ absent }}</div>
        <p style="font-size: 0.8rem; font-weight: 700; opacity: 0.6;">Total Absent</p>
    </div>
    <div class="nm-card" style="text-align: center; border-bottom: 5px solid var(--accent-color);">
        <h4
            style="color: var(--text-secondary); font-weight: 800; font-size: 0.75rem; text-transform: uppercase; margin-bottom: 15px;">
            Attendance Percentage</h4>
        <div style="font-size: 3rem; font-weight: 900; color: var(--accent-color);">
            {% if (present + absent) > 0 %}
            {{ ((present / (present + absent)) * 100) | round(1) }}%
            {% else %}
            0%
            {% endif %}
        </div>
        <p style="font-size: 0.8rem; font-weight: 700; opacity: 0.6;">Overall Attendance</p>
    </div>
</div>

<div class="nm-table-container">
    <div style="padding: 20px 10px 40px;">
        <h2 style="font-weight: 900; letter-spacing: -1px;">Attendance History</h2>
    </div>

    <table>
        <thead>
            <tr>
                <th style="padding-left: 30px;">Date</th>
                <th>Subject</th>
                <th style="text-align: right; padding-right: 30px;">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for entry in attendances %}
            <tr>
                <td style="padding-left: 30px; font-weight: 800; font-size: 1rem;">{{ entry.date }}</td>
                <td style="font-weight: 700; opacity: 0.8;">{{ entry.subject or 'System Allotment' }}</td>
                <td style="text-align: right; padding-right: 30px;">
                    <span class="nm-badge" style="background: {% if entry.status == 'Present' %}rgba(46,204,113,0.1){% else %}rgba(231,76,60,0.1){% endif %}; 
                                       color: {% if entry.status == 'Present' %}#2ecc71{% else %}#e74c3c{% endif %};
                                       box-shadow: none; border: 1px solid currentColor;">
                        {{ entry.status | upper }}
                    </span>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="3"
                    style="padding: 80px; text-align: center; color: var(--text-secondary); font-weight: 700; opacity: 0.5;">
                    No attendance records found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}