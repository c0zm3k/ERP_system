{% extends "base.html" %}

{% block title %}Time Slots - Lumen ERP{% endblock %}

{% block content %}
<div class="nm-card" style="max-width: 900px; margin: 40px auto; padding: 40px;">
    <div style="margin-bottom: 40px;">
        <h1 class="hero-text" style="margin-bottom: 10px;">Time Slots</h1>
        <p style="color: var(--text-secondary); font-weight: 700;">Create slots for your department so classes can be assigned without conflicts.</p>
    </div>

    <div class="nm-inset" style="padding: 40px; margin-bottom: 40px; border-radius: var(--radius-xl);">
        <h2 style="font-weight: 900; margin-bottom: 25px;">Create Slot</h2>
        <form action="/hod/slots" method="POST">
            <div class="grid-2" style="gap: 20px; margin-bottom: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase;">Slot name</label>
                    <input type="text" name="slot_name" class="nm-input" placeholder="e.g. Slot 1, Mon 9-10" required>
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase;">Day</label>
                    <select name="day_of_week" class="nm-input" required>
                        <option value="Mon">Monday</option>
                        <option value="Tue">Tuesday</option>
                        <option value="Wed">Wednesday</option>
                        <option value="Thu">Thursday</option>
                        <option value="Fri">Friday</option>
                        <option value="Sat">Saturday</option>
                    </select>
                </div>
            </div>
            <div class="grid-2" style="gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase;">Start time</label>
                    <input type="time" name="start_time" class="nm-input" required>
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px; font-weight: 800; font-size: 0.75rem; text-transform: uppercase;">End time</label>
                    <input type="time" name="end_time" class="nm-input" required>
                </div>
            </div>
            <button type="submit" class="nm-btn primary" style="margin-top: 25px; padding: 16px 30px;">Add Slot</button>
        </form>
    </div>

    <h2 style="font-weight: 900; margin-bottom: 20px;">Your slots</h2>
    <div style="display: flex; flex-direction: column; gap: 12px;">
        {% for slot in slots %}
        <div class="nm-card" style="padding: 20px 25px; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <span style="font-weight: 900;">{{ slot.name }}</span>
                <span style="opacity: 0.8; margin-left: 12px;">{{ slot.day_of_week }} {{ slot.start_time }} â€“ {{ slot.end_time }}</span>
            </div>
            <a href="/hod/slots/delete/{{ slot.id }}" class="nm-btn" style="padding: 8px 14px; font-size: 0.8rem; color: #ff6b6b;" onclick="return confirm('Remove this slot?')">Remove</a>
        </div>
        {% else %}
        <p style="color: var(--text-secondary); font-weight: 700;">No slots yet. Create one above.</p>
        {% endfor %}
    </div>

    <a href="/hod/allot_class" class="nm-btn" style="margin-top: 30px; display: inline-block;">Back to Assign Classes</a>
</div>
{% endblock %}
